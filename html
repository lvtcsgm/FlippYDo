<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flippy Do - 8-bit Binary Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .mono-font {
            font-family: 'Roboto Mono', monospace;
        }
        /* Simple transition for card flips */
        .card {
            transition: all 0.3s ease-in-out;
            -webkit-tap-highlight-color: transparent; /* Removes blue tap highlight on mobile */
        }
        /* Animation for the success message */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        /* Hide scrollbar but allow scrolling */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8 text-center">
        
        <!-- Header -->
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Flippy Do</h1>
        <p class="text-gray-500 mt-2">Unit 1 Lesson 4 - Activity</p>
        
        <!-- Target and Total Display -->
        <div class="flex flex-col md:flex-row justify-around items-center my-8 bg-gray-50 p-6 rounded-xl">
            <div class="mb-4 md:mb-0">
                <h2 class="text-lg font-semibold text-gray-500 uppercase tracking-wider">Target Number</h2>
                <p id="target-number" class="text-5xl font-bold text-indigo-600">145</p>
            </div>
            <div class="w-px h-16 bg-gray-200 hidden md:block"></div>
            <div>
                <h2 class="text-lg font-semibold text-gray-500 uppercase tracking-wider">Your Total</h2>
                <p id="current-total" class="text-5xl font-bold text-gray-700">0</p>
            </div>
        </div>

        <!-- Flippable Cards -->
        <div id="cards-container" class="flex space-x-2 overflow-x-auto pb-4 no-scrollbar">
            <!-- Cards will be generated by JavaScript -->
        </div>
        <div class="text-gray-500 text-sm mt-2">You can scroll the cards left and right on smaller screens.</div>


        <!-- Success Message -->
        <div id="success-message" class="h-10 my-4">
            <!-- Message will appear here -->
        </div>

        <!-- New Game Button -->
        <button id="new-game-btn" class="w-full sm:w-auto bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
            New Number
        </button>

    </div>

    <script>
        // --- DOM Element References ---
        const targetNumberEl = document.getElementById('target-number');
        const currentTotalEl = document.getElementById('current-total');
        const cardsContainerEl = document.getElementById('cards-container');
        const successMessageEl = document.getElementById('success-message');
        const newGameBtn = document.getElementById('new-game-btn');

        // --- Game State ---
        let targetNumber = 0;
        // Updated to 8 cards (8 bits)
        const cardValues = [128, 64, 32, 16, 8, 4, 2, 1]; 

        // --- Functions ---

        /**
         * Generates a random integer up to 255.
         * The maximum is 255 because 128+64+...+1 = 255.
         */
        function generateRandomNumber() {
            return Math.floor(Math.random() * 255) + 1;
        }

        /**
         * Creates the card elements based on the image provided.
         */
        function createCards() {
            cardsContainerEl.innerHTML = ''; // Clear existing cards
            cardValues.forEach((value, index) => {
                const power = 7 - index;
                const cardWrapper = document.createElement('div');
                cardWrapper.className = 'flex-shrink-0 w-24'; // Wrapper for consistent sizing

                const card = document.createElement('div');
                card.className = 'card cursor-pointer bg-gray-200 text-gray-700 rounded-lg h-40 shadow-sm flex flex-col justify-between p-2';
                card.dataset.value = value;
                card.dataset.on = 'false';

                // Top part: 2 to the power of X
                const powerText = document.createElement('div');
                powerText.className = 'text-gray-500 text-sm';
                powerText.innerHTML = `2<sup>${power}</sup>`;
                
                // Middle part: Whole number equivalent
                const valueText = document.createElement('div');
                valueText.className = 'text-3xl font-bold';
                valueText.textContent = value;
                
                // Bottom part: Binary digit (0 or 1)
                const binaryDigit = document.createElement('div');
                binaryDigit.className = 'binary-digit mono-font text-5xl font-bold text-gray-400';
                binaryDigit.textContent = '0';

                card.appendChild(powerText);
                card.appendChild(valueText);
                card.appendChild(binaryDigit);
                cardWrapper.appendChild(card);
                cardsContainerEl.appendChild(cardWrapper);
            });
        }

        /**
         * Starts a new round of the game.
         */
        function startNewRound() {
            targetNumber = generateRandomNumber();
            targetNumberEl.textContent = targetNumber;

            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.classList.remove('bg-indigo-500', 'text-white', 'scale-105', 'shadow-xl');
                card.classList.add('bg-gray-200', 'text-gray-700');
                card.dataset.on = 'false';
                const binaryDigit = card.querySelector('.binary-digit');
                binaryDigit.textContent = '0';
                binaryDigit.classList.remove('text-white');
                binaryDigit.classList.add('text-gray-400');
            });

            updateTotal();
            successMessageEl.innerHTML = '';
        }

        /**
         * Handles the logic when a card is clicked.
         * @param {MouseEvent} event - The click event.
         */
        function handleCardClick(event) {
            const clickedCard = event.target.closest('.card');
            if (!clickedCard) return;

            const isOn = clickedCard.dataset.on === 'true';
            clickedCard.dataset.on = !isOn;
            
            const binaryDigit = clickedCard.querySelector('.binary-digit');

            // Toggle visual styles and binary digit
            if (!isOn) { // Turning the card ON
                clickedCard.classList.add('bg-indigo-500', 'text-white', 'scale-105', 'shadow-xl');
                clickedCard.classList.remove('bg-gray-200', 'text-gray-700');
                binaryDigit.textContent = '1';
                binaryDigit.classList.add('text-white');
                binaryDigit.classList.remove('text-gray-400');
            } else { // Turning the card OFF
                clickedCard.classList.remove('bg-indigo-500', 'text-white', 'scale-105', 'shadow-xl');
                clickedCard.classList.add('bg-gray-200', 'text-gray-700');
                binaryDigit.textContent = '0';
                binaryDigit.classList.remove('text-white');
                binaryDigit.classList.add('text-gray-400');
            }

            updateTotal();
        }

        /**
         * Calculates the total of 'on' cards and updates the display.
         */
        function updateTotal() {
            let currentTotal = 0;
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                if (card.dataset.on === 'true') {
                    currentTotal += parseInt(card.dataset.value, 10);
                }
            });

            currentTotalEl.textContent = currentTotal;
            checkWinCondition(currentTotal);
        }

        /**
         * Checks if the current total matches the target number.
         * @param {number} total - The current total score.
         */
        function checkWinCondition(total) {
            if (total === targetNumber) {
                successMessageEl.innerHTML = `
                    <p class="fade-in text-2xl font-bold text-green-600">You got it!</p>
                `;
            } else {
                successMessageEl.innerHTML = '';
            }
        }

        // --- Event Listeners ---
        cardsContainerEl.addEventListener('click', handleCardClick);
        newGameBtn.addEventListener('click', startNewRound);

        // --- Initial Game Setup ---
        createCards();
        startNewRound();
    </script>

</body>
</html>
